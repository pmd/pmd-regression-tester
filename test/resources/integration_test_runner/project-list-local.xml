<?xml version="1.0"?>

<projectlist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="projectlist_1_2_0.xsd">
  <description>Standard Projects</description>

  <project>
    <name>checkstyle</name>
    <type>git</type>
    <connection>https://github.com/checkstyle/checkstyle</connection>
    <tag>checkstyle-9.1</tag>

    <!-- this avoids analyzing src/test/resources-noncompilable ... -->
    <src-subpath>src/main/java</src-subpath>

    <build-command><![CDATA[#!/usr/bin/env bash
if test -e classpath.txt; then
  exit
fi

set -e

# Make sure to use java11. This is already installed by setup-java.
export JAVA_HOME=${HOME}/openjdk11
export PATH=$JAVA_HOME/bin:$PATH

mvn test-compile -B
mvn dependency:build-classpath -DincludeScope=test -Dmdep.outputFile=classpath.txt -B
]]></build-command>
    <auxclasspath-command>echo -n "$(pwd)/target/classes:$(pwd)/target/test-classes:"; cat classpath.txt</auxclasspath-command>
  </project>

  <!-- this project configuration is here, so that PMD's repo is cloned into target/repositories for integration tests -->
  <project>
    <name>pmd</name>
    <type>git</type>
    <connection>https://github.com/pmd/pmd</connection>
    <!-- just take a subset of pmd, to make the test faster -->
    <src-subpath>pmd-core/src/main/java</src-subpath>
  </project>
</projectlist>
